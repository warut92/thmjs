//get text from textarea
let inputText = document.getElementById("thm").innerHTML;

//splite new line by regex
  let newLineArr = inputText.split(/\n/g)

//find length
let newLineArrLen = newLineArr.length;
//make variable
let HTMLTableOutput = "";
// looping for create new line on display
for (let i = 0; i < newLineArrLen; i++) {
  HTMLTableOutput += "<tr><td>" + newLineArr[i] + "</td></tr>" + "\n";
}
//replace comma with table tag form
HTMLTableOutput = HTMLTableOutput.replace(/<tr><td>\(([^ )]*)\)<\/td><\/tr>/g, '<a name=\"$1\">$1</a><table>');

HTMLTableOutput = HTMLTableOutput.replace(/\<a\<\/td\>\<td\>/gm, '<a ');

HTMLTableOutput = HTMLTableOutput.replace(/ /g, "</td><td>");
HTMLTableOutput = HTMLTableOutput.replace(/1/g, '‡∏î');
HTMLTableOutput = HTMLTableOutput.replace(/%‡∏î/g, '1');
HTMLTableOutput = HTMLTableOutput.replace(/2/g, '‡∏£');
HTMLTableOutput = HTMLTableOutput.replace(/3/g, '‡∏°');
HTMLTableOutput = HTMLTableOutput.replace(/4/g, '‡∏ü');
HTMLTableOutput = HTMLTableOutput.replace(/5/g, '‡∏ã');
HTMLTableOutput = HTMLTableOutput.replace(/6/g, '‡∏•');
HTMLTableOutput = HTMLTableOutput.replace(/7/g, '‡∏ó');
HTMLTableOutput = HTMLTableOutput.replace(/7/g, '‡∏ó');
HTMLTableOutput = HTMLTableOutput.replace(/8/g, '‡∏î‡πç');
HTMLTableOutput = HTMLTableOutput.replace(/9/g, '‡∏£‡πç');
// HTMLTableOutput = HTMLTableOutput.replace(/\+/g, '‡∏°‡πç');
HTMLTableOutput = HTMLTableOutput.replace(/\*/g, '‡πç');
HTMLTableOutput = HTMLTableOutput.replace(/\./g, '‡∏∫');
HTMLTableOutput = HTMLTableOutput.replace(/\\s/g, ' ');
HTMLTableOutput = HTMLTableOutput.replace(/\_/g, ' ');
HTMLTableOutput = HTMLTableOutput.replace(/\[(.*?)\]/g, '<small>$1</small>');
//‡∏Ñ‡∏±‡∏ô‡∏ä‡∏±‡∏Å‡∏≠‡∏≠‡∏Å
HTMLTableOutput = HTMLTableOutput.replace(/([‡∏î‡∏£‡∏°‡∏ü‡∏ã‡∏•‡∏ó])\{/g, '<span style=\"display: inline-block; position: relative;\">$1<sub style=\"position: absolute; bottom: -0.5em; left: 50%; transform: translateX(-50%);\"><</sub></span>');
//‡∏Ñ‡∏±‡∏ô‡∏ä‡∏±‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤
HTMLTableOutput = HTMLTableOutput.replace(/([‡∏î‡∏£‡∏°‡∏ü‡∏ã‡∏•‡∏ó])\}/g, '<span style=\"display: inline-block; position: relative;\">$1<sub style=\"position: absolute; bottom: -0.5em; left: 50%; transform: translateX(-50%);\">></sub></span>');
//‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡πÇ‡∏ô‡πâ‡∏ï‡∏ö‡∏ß‡∏Å
HTMLTableOutput = HTMLTableOutput.replace(/([‡∏î‡∏£‡∏°‡∏ü‡∏ã‡∏•‡∏ó])\+/g, '<span style=\"display: inline-block; position: relative;\">$1<sub style=\"position: absolute; bottom: 0.7em; left: 50%; transform: translateX(-50%);\">+</sub></span>');
//‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏≤‡∏¢‡πÇ‡∏ô‡πâ‡∏ï‡∏•‡∏ö
HTMLTableOutput = HTMLTableOutput.replace(/([‡∏î‡∏£‡∏°‡∏ü‡∏ã‡∏•‡∏ó])\_/g, '<span style=\"display: inline-block; position: relative;\">$1<sub style=\"position: absolute; bottom: 0.7em; left: 50%; transform: translateX(-50%);\">-</sub></span>');
//‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡πÇ‡∏ô‡πâ‡∏ï‡∏Å‡∏•‡∏≤‡∏á
HTMLTableOutput = HTMLTableOutput.replace(/([‡∏î‡∏£‡∏°‡∏ü‡∏ã‡∏•‡∏ó])\o/g, '<span style=\"display: inline-block; position: relative;\">$1<sub style=\"position: absolute; bottom: 0.6em; left: 50%; transform: translateX(-50%);\"><small>¬∫</small></sub></span>');
//‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏û‡∏£‡∏°
HTMLTableOutput = HTMLTableOutput.replace(/([‡∏î‡∏£‡∏°‡∏ü‡∏ã‡∏•‡∏ó‡πç])t/g, '<span style=\"display: inline-block; position: relative;\">$1<sub style=\"position: absolute; bottom: 0.7em; left: 70%; transform: translateX(-50%);\"><small>ùÜ±</small></sub></span>');
//‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ô‡∏¥‡πâ‡∏ß‡∏ã‡∏≠‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡πÄ‡∏Ç‡πâ
HTMLTableOutput = HTMLTableOutput.replace(/([‡∏î‡∏£‡∏°‡∏ü‡∏ã‡∏•‡∏ó‡πç])\\([‡πë‡πí‡πì‡πî‡πï‡πñ‡πó‡πò‡πô‡πê‡∏ä‡∏Å‡∏ô])/g, '<span style=\"display: inline-block; position: relative;\">$1<sub style=\"position: absolute; bottom: 0.86em; left: 50%; transform: translateX(-50%);\"><small>$2</small></span>');
//‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ô‡∏¥‡πâ‡∏ß‡∏ã‡∏≠ ‡πÄ‡∏•‡∏Ç‡πÇ‡∏£‡∏°‡∏±‡∏ô
HTMLTableOutput = HTMLTableOutput.replace(/([‡∏î‡∏£‡∏°‡∏ü‡∏ã‡∏•‡∏ó‡πç])\\(iiiii)/g, '<span style=\"display: inline-block; position: relative;\">$1<sub style=\"position: absolute; bottom: 0.86em; left: 50%; transform: translateX(-50%);\"><small>5</small></span>');
HTMLTableOutput = HTMLTableOutput.replace(/([‡∏î‡∏£‡∏°‡∏ü‡∏ã‡∏•‡∏ó‡πç])\\(iiii)/g, '<span style=\"display: inline-block; position: relative;\">$1<sub style=\"position: absolute; bottom: 0.86em; left: 50%; transform: translateX(-50%);\"><small>4</small></span>');
HTMLTableOutput = HTMLTableOutput.replace(/([‡∏î‡∏£‡∏°‡∏ü‡∏ã‡∏•‡∏ó‡πç])\\(iii)/g, '<span style=\"display: inline-block; position: relative;\">$1<sub style=\"position: absolute; bottom: 0.86em; left: 50%; transform: translateX(-50%);\"><small>3</small></span>');
HTMLTableOutput = HTMLTableOutput.replace(/([‡∏î‡∏£‡∏°‡∏ü‡∏ã‡∏•‡∏ó‡πç])\\(ii)/g, '<span style=\"display: inline-block; position: relative;\">$1<sub style=\"position: absolute; bottom: 0.86em; left: 50%; transform: translateX(-50%);\"><small>2</small></span>');
HTMLTableOutput = HTMLTableOutput.replace(/([‡∏î‡∏£‡∏°‡∏ü‡∏ã‡∏•‡∏ó‡πç])\\(i)/g, '<span style=\"display: inline-block; position: relative;\">$1<sub style=\"position: absolute; bottom: 0.86em; left: 50%; transform: translateX(-50%);\"><small>1</small></span>');
HTMLTableOutput = HTMLTableOutput.replace(/([‡∏î‡∏£‡∏°‡∏ü‡∏ã‡∏•‡∏ó‡πç])\\(0)/g, '<span style=\"display: inline-block; position: relative;\">$1<sub style=\"position: absolute; bottom: 0.86em; left: 50%; transform: translateX(-50%);\"><small>0</small></span>');
//‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏≤‡∏¢‡∏•‡∏ß‡∏î‡∏à‡∏∞‡πÄ‡∏Ç‡πâ
HTMLTableOutput = HTMLTableOutput.replace(/([‡∏î‡∏£‡∏°‡∏ü‡∏ã‡∏•‡∏ó‡πç])\\([+])/g, '<span style=\"display: inline-block; position: relative;\">$1<sub style=\"position: absolute; bottom: -0.5em; left: 50%; transform: translateX(-50%);\"><small>$2</small></span>');


//‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏•‡∏Ç‡πÑ‡∏ó‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏≤‡∏£‡∏≤‡∏ö‡∏¥‡∏Å
HTMLTableOutput = HTMLTableOutput.replace(/‡πë/g, '<span style="font-size:7px">1</span>');
HTMLTableOutput = HTMLTableOutput.replace(/‡πí/g, '<span style="font-size:7px">2</span>');
HTMLTableOutput = HTMLTableOutput.replace(/‡πì/g, '<span style="font-size:7px">3</span>');
HTMLTableOutput = HTMLTableOutput.replace(/‡πî/g, '<span style="font-size:7px">4</span>');
HTMLTableOutput = HTMLTableOutput.replace(/‡πï/g, '<span style="font-size:7px">5</span>');
HTMLTableOutput = HTMLTableOutput.replace(/‡πñ/g, '<span style="font-size:7px">6</span>');
HTMLTableOutput = HTMLTableOutput.replace(/‡πó/g, '<span style="font-size:7px">7</span>');
HTMLTableOutput = HTMLTableOutput.replace(/‡πò/g, '<span style="font-size:7px">8</span>');
HTMLTableOutput = HTMLTableOutput.replace(/‡πô/g, '<span style="font-size:7px">9</span>');
HTMLTableOutput = HTMLTableOutput.replace(/‡πê/g, '<span style="font-size:7px">0</span>');
//‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏î‡∏µ‡∏î‡πÄ‡∏Ç‡πâ‡∏≤
HTMLTableOutput = HTMLTableOutput.replace(/([‡∏î‡∏£‡∏°‡∏ü‡∏ã‡∏•‡∏ó‡πç])v/g, '<span style=\"display: inline-block; position: relative;\">$1<sub style=\"position: absolute; bottom: 0.3em; left: 50%; transform: translateX(-30%);\">ùÜ´</span>');
//‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏î‡∏µ‡∏î‡∏≠‡∏≠‡∏Å
HTMLTableOutput = HTMLTableOutput.replace(/([‡∏î‡∏£‡∏°‡∏ü‡∏ã‡∏•‡∏ó‡πç‡πë‡πí‡πì‡πî‡πï‡πñ‡πó‡πò‡πô‡πê])\^/g, '<span style=\"display: inline-block; position: relative;\">$1<sub style=\"position: absolute; bottom: 0.9em; left: 40%; transform: translateX(-5%);rotate: -180deg;\">ùÜ´</span>');
//‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡∏≥ next ‡πÄ‡∏õ‡πá‡∏ô tag page ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á page break ‡∏™‡∏≤‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå
HTMLTableOutput = HTMLTableOutput.replace(/<tr><td>next<\/td><\/tr>/gm, "<page>")
//‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡∏Ç
HTMLTableOutput = HTMLTableOutput.replace(/%‡∏î/g, '1');
HTMLTableOutput = HTMLTableOutput.replace(/%‡∏£/g, '2');
HTMLTableOutput = HTMLTableOutput.replace(/%‡∏°/g, '3');
HTMLTableOutput = HTMLTableOutput.replace(/%‡∏ü/g, '4');
HTMLTableOutput = HTMLTableOutput.replace(/%‡∏ã/g, '5');
HTMLTableOutput = HTMLTableOutput.replace(/%‡∏•/g, '6');
HTMLTableOutput = HTMLTableOutput.replace(/%‡∏ó/g, '7');
HTMLTableOutput = HTMLTableOutput.replace(/%8/g, '8');
HTMLTableOutput = HTMLTableOutput.replace(/%9/g, '9');
HTMLTableOutput = HTMLTableOutput.replace(/%0/g, '0');
HTMLTableOutput = HTMLTableOutput.replace(/\/\//g, 'END');
  // HTMLTableOutput = HTMLTableOutput.replace(/<tr><td>END<\/td><\/tr>/g, '<\/table><div style=\"text-align: right\;font-size:10px">‡∏Å‡∏•‡∏±‡∏ö‡∏ï‡πâ‡∏ô<\/div>');
HTMLTableOutput = HTMLTableOutput.replace(/<tr><td>END<\/td><\/tr>/g, '<tr><td style=\"border-bottom: hidden;border-left: hidden;border-right: hidden\"> </td><td style=\"border-bottom: hidden;border-left: hidden;border-right: hidden\"> </td><td style=\"border-bottom: hidden;border-left: hidden;border-right: hidden\"> </td><td style=\"border-bottom: hidden;border-left: hidden;border-right: hidden\"> </td><td style=\"border-bottom: hidden;border-left: hidden;border-right: hidden\"> </td><td style=\"border-bottom: hidden;border-left: hidden;border-right: hidden\"> </td><td style=\"border-bottom: hidden;border-left: hidden;border-right: hidden\"> </td><td style=\"border-bottom: hidden;border-left: hidden;border-right: hidden\"><small>‡∏Å‡∏•‡∏±‡∏ö‡∏ï‡πâ‡∏ô</small></td></tr>');
// HTMLTableOutput = HTMLTableOutput.replace(/\/\//g, '</table><span style=\"text-align: right\">‡∏Å‡∏•‡∏±‡∏ö‡∏ï‡πâ‡∏ô<\/span>');

HTMLTableOutput = HTMLTableOutput.replace(/\<a\<\/td\>\<td\>/gm, '<a ');

HTMLTableOutput = HTMLTableOutput.replace(/<tr><td><\/td><\/tr>/g, '<\/table><br><table>');
console.log('HTMLTABLEOUTPUT', HTMLTableOutput)

if (HTMLTableOutput !== "<tr><td></td></tr>\n") {
  document.getElementById('thm').innerHTML =
    "<table style=&#34width:100%&#34>\n" + HTMLTableOutput + "</table>";
  }
